<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/rails/css/main.css">
    <title>Rails</title>
</head>
<body>
    <main>
        <header class="site-header">
            <h1 class="site-title"><a href="/rails/">Rails</a></h1>
            <nav class="site-nav">
                <a href="/rails/about/" class="">About</a>
            </nav>
        </header>
        <article class="post">
    <h2 class="post-header">07 Routes</h2>
    <p class="post-meta">2017-06-08</p>
    <p>Trobem aquest arxiu ací: <code class="highlighter-rouge">/config/routes.rb</code>.</p>

<p>Té dues rutes prefefinides:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s1">'welcome/index'</span>

  <span class="n">root</span> <span class="s1">'welcome#index'</span>
</code></pre></div></div>

<p>Nosaltres hem definit la ruta <code class="highlighter-rouge">welcome#index</code>.</p>

<p>Quan el framework reb una petició el primer que fa és examinar la ruta.</p>

<p>Verbs http</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET
POST
PATCH
PUT
DELETE
</code></pre></div></div>

<p>Cal que estiga el verb i la ruta.</p>

<p>Es poden configurar rutes especials, per tal que en posar una ruta especial.</p>

<p>Definim les següents rutes:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>resources :articles
  get "/articles"
  post "/articles"
  delete "/articles"
  get "/articles/:id"
  get "/articles/new"
  get "/articles/:id/edit"
  get patch "/articles/:id"
  get put "/articles/:id"
</code></pre></div></div>

<p>Aquestes rutes les deixarem comentades.</p>

<p>Explicarem la sintaxi amb un exemple:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>

    <span class="n">get</span> <span class="s1">'prueba'</span><span class="p">,</span> <span class="n">to</span> <span class="s1">'prueba#metodoprueba'</span>

<span class="k">end</span>
</code></pre></div></div>

<p>Explicació:</p>

<ul>
  <li><code class="highlighter-rouge">prueba</code>: nom del controlador.</li>
  <li><code class="highlighter-rouge">metodoprueba</code>: nom del mètode.</li>
</ul>

<p>Així, caldrà crear primer el controlador per tal que no ens dóne una errada:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rails generate controller prueba
rails g controller prueba
</code></pre></div></div>

<p>Amb la <code class="highlighter-rouge">g</code> soles podem evitar escriure tota la paraula.</p>

<p>Ara caldrà definir el controlador editant-lo, per fer-ho caldrà anar a la carpeta controller i editar el controlador <code class="highlighter-rouge">prueba</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PruebaController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
    <span class="k">def</span> <span class="nf">metodoprueba</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Seguidament caldrà generar la vista a aquest arxiu <code class="highlighter-rouge">/vista/metodoprueba.html.erb</code> amb aquest contingut:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;p&gt;</span>Prueba<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div>


    
</article>

    </main>
    
</body>
</html>
