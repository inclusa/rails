<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/rails/css/main.css">
    <title>Rails</title>
</head>
<body>
    <main>
        <header class="site-header">
            <h1 class="site-title"><a href="/rails/">Rails</a></h1>
            <nav class="site-nav">
                <a href="/rails/about/" class="">About</a>
            </nav>
        </header>
        <article class="post">
    <h2 class="post-header">02 Primera aplicació</h2>
    <p class="post-meta">2017-06-01</p>
    <p>Rails bé amb un grup important de generadors de codi.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rails new blog
</code></pre>
</div>

<p>Per defecte es crea una base de dades a <code class="highlighter-rouge">sqlite</code>, en cas que vullguem vincular aquesta base de dades a altre servei de base de dades ho farem així:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rails new projecte --database=postgres
rails new projecte -d=postgres
</code></pre>
</div>

<p>Podem crear una base de dades per defecte així:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rails db:drop db:create db:migrate
</code></pre>
</div>

<p>Explicació:</p>

<ul>
  <li><code class="highlighter-rouge">drop</code>: elimina la base de dades que hi havia.</li>
  <li><code class="highlighter-rouge">create</code>: crea una nova base de dades.</li>
  <li><code class="highlighter-rouge">migrate</code>: migra la base de dades.</li>
</ul>

<p>Crea diferents arxius i instal·la gemes necessàries.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rails server
rails s
</code></pre>
</div>

<p>Arranca un server que porta el mateix framework.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>localhost:3000
</code></pre>
</div>

<p>Tancar el server</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Ctrl + c
</code></pre>
</div>

<p>Generem un controlador anomenat <code class="highlighter-rouge">welcome</code> que va a tenir un mètode anomenat <code class="highlighter-rouge">index</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>rails generate controller welcome index &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
rails g controller welcome index =======
rails g controller wellcom index &gt;&gt;&gt;&gt;&gt;&gt;&gt; 12d0c05426031b08a72fa8ae97001de13f8846a0
</code></pre>
</div>

<p>Ens dirigim a la carpeta <code class="highlighter-rouge">app/controlers/</code>, a l’arxiu <code class="highlighter-rouge">welcome_controler.rb</code>:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">WelcomeControler</span> <span class="o">&gt;</span> <span class="no">ApplicationControler</span>
  <span class="k">def</span> <span class="nf">index</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>
<p>Tots els controladors hereten de <code class="highlighter-rouge">ApplicationControler</code>.</p>

<p>Tots els controladors han d’acabar amb guió baix i la paraula <code class="highlighter-rouge">Controler</code>.</p>

<p>També es genera un arxiu a la carpeta <code class="highlighter-rouge">app/view/welcome/</code> anomenat <code class="highlighter-rouge">index.html.erb</code>:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Welcome</span><span class="c1">#index&lt;/h1&gt;</span>
<span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span><span class="n">find</span> <span class="n">me</span> <span class="k">in</span> <span class="n">app</span><span class="o">/</span><span class="n">views</span><span class="o">/</span><span class="n">welcome</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="nf">html</span><span class="p">.</span><span class="nf">erb</span><span class="o">&lt;</span><span class="sr">/p&gt;
</span></code></pre>
</div>
<p>Podem posar en el navegador:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">localhost</span><span class="p">:</span><span class="mi">3000</span><span class="o">/</span><span class="n">welcome</span><span class="o">/</span><span class="n">index</span>
</code></pre>
</div>

<p>Així que, la sintaxi que segueix és el nom del controlador i nom de l’arxiu.</p>

<p>Podem canviar la pàgina de benvinguda a l’arxiu <code class="highlighter-rouge">config/routes.rb</code> en la línia on posa <code class="highlighter-rouge">get 'welcome/index'. Deixarem la línia </code>get<code class="highlighter-rouge"> com està i canviarem la línia </code>root` per redirigir-la on volem.</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">get</span> <span class="s1">'welcome/index'</span>

  <span class="c1"># For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html</span>
<span class="k">end</span>
</code></pre>
</div>

<p>Font: <a href="http://codigofacilito.com/videos/curso_de_ruby_on_rails_desde_cero_primer_aplicacion">CodigoFacilito Rails4</a></p>


    
</article>

    </main>
    
</body>
</html>
